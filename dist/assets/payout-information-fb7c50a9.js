import{r as y,R as I,u as P,j as d,W as A}from"./index-17e537d5.js";import{u as k}from"./useTheme-c5b7bcd7.js";const U={setOnLoadError:e=>{},setOnLoaderStart:e=>{}},j={"account-onboarding":{setFullTermsOfServiceUrl:e=>{},setRecipientTermsOfServiceUrl:e=>{},setPrivacyPolicyUrl:e=>{},setSkipTermsOfServiceCollection:e=>{},setCollectionOptions:e=>{},setOnExit:e=>{},setOnStepChange:e=>{}},"account-management":{setCollectionOptions:e=>{}},"notification-banner":{setCollectionOptions:e=>{},setOnNotificationsChange:e=>{}},"payment-details":{setPayment:e=>{},setOnClose:e=>{}},"tax-settings":{setHideProductTaxCodeSelector:e=>{},setDisplayHeadOfficeCountries:e=>{},setOnTaxSettingsUpdated:e=>{}},"tax-registrations":{setOnAfterTaxRegistrationAdded:e=>{},setDisplayCountries:e=>{}}},L={"account-onboarding":"stripe-connect-account-onboarding",payments:"stripe-connect-payments","payment-details":"stripe-connect-payment-details",payouts:"stripe-connect-payouts","payouts-list":"stripe-connect-payouts-list",balances:"stripe-connect-balances","account-management":"stripe-connect-account-management","notification-banner":"stripe-connect-notification-banner",documents:"stripe-connect-documents","tax-registrations":"stripe-connect-tax-registrations","tax-settings":"stripe-connect-tax-settings"},w="loadConnect was called but an existing Connect.js script already exists in the document; existing script parameters will be used",R="https://connect-js.stripe.com/v0.1/connect.js",E="https://connect-js.stripe.com/v1.0/connect.js",$=()=>document.querySelectorAll(`script[src="${E}"]`)[0]||document.querySelectorAll(`script[src="${R}"]`)[0]||null,z=()=>{const e=document.createElement("script");if(e.src=E,!document.head)throw new Error("Expected document.head not to be null. Connect.js requires a <head> element.");return document.head.appendChild(e),e};let v=null;const M=()=>(v!==null||(v=new Promise((e,t)=>{if(typeof window>"u"){t("ConnectJS won't load when rendering code in the server - it can only be loaded on a browser. This error is expected when loading ConnectJS in SSR environments, like NextJS. It will have no impact in the UI, however if you wish to avoid it, you can switch to the `pure` version of the connect.js loader: https://github.com/stripe/connect-js#importing-loadconnect-without-side-effects.");return}if(window.StripeConnect&&console.warn(w),window.StripeConnect){const n=O(window.StripeConnect);e(n);return}try{let n=$();n?console.warn(w):n||(n=z()),n.addEventListener("load",()=>{if(window.StripeConnect){const r=O(window.StripeConnect);e(r)}else t(new Error("Connect.js did not load the necessary objects"))}),n.addEventListener("error",()=>{t(new Error("Failed to load Connect.js"))})}catch(n){t(n)}})),v),W=e=>e in j,D=(e,t)=>{var n;const r=(()=>{try{return t.fetchClientSecret()}catch(i){return Promise.reject(i)}})(),p=(n=t.metaOptions)!==null&&n!==void 0?n:{},l=e.then(i=>i.initialize(Object.assign(Object.assign({},t),{metaOptions:Object.assign(Object.assign({},p),{eagerClientSecretPromise:r})})));return{create:i=>{let c=L[i];c||(c=i);const o=document.createElement(c),m=W(i)?j[i]:{},u=Object.assign(Object.assign({},m),U);for(const f in u)o[f]=function(S){l.then(()=>{this[`${f}InternalOnly`](S)})};return l.then(f=>{if(!o.isConnected&&!o.setConnector){const S=o.style.display;o.style.display="none",document.body.appendChild(o),document.body.removeChild(o),o.style.display=S}if(!o||!o.setConnector)throw new Error(`Element ${i} was not transformed into a custom element. Are you using a documented component? See https://docs.stripe.com/connect/supported-embedded-components for a list of supported components`);o.setConnector(f.connect)}),o},update:i=>{l.then(c=>{c.update(i)})},debugInstance:()=>l,logout:()=>l.then(i=>i.logout())}},O=e=>(window.StripeConnect=window.StripeConnect||{},window.StripeConnect.optimizedLoading=!0,{initialize:n=>{var r;const p=(r=n.metaOptions)!==null&&r!==void 0?r:{};return e.init(Object.assign(Object.assign({},n),{metaOptions:Object.assign(Object.assign({},p),{sdk:!0,sdkOptions:{sdkVersion:"3.3.15"}})}))}}),_=Promise.resolve().then(()=>M());let T=!1;_.catch(e=>{T||console.warn(e)});const F=e=>(T=!0,D(_,e));function V(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,p,l,i,c=[],o=!0,m=!1;try{if(l=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=l.call(n)).done)&&(c.push(r.value),c.length!==t);o=!0);}catch(u){m=!0,p=u}finally{try{if(!o&&n.return!=null&&(i=n.return(),Object(i)!==i))return}finally{if(m)throw p}}return c}}function q(e,t){return G(e)||V(e,t)||J(e,t)||N()}function G(e){if(Array.isArray(e))return e}function J(e,t){if(e){if(typeof e=="string")return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}}function b(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g=y.createContext(null);g.displayName="ConnectComponents";var B=function(t){var n=t.connectInstance,r=t.children;return y.createElement(g.Provider,{value:{connectInstance:n}},r)},H=function(){var t=y.useContext(g);if(!t)throw new Error("Could not find Components context; You need to wrap the part of your app in an <ConnectComponentsProvider> provider.");return t},K=function(t){var n=y.useState(null),r=q(n,2),p=r[0],l=r[1],i=H(),c=i.connectInstance,o=y.useRef(null),m=y.createElement("div",{style:{width:"100%"},ref:o});return y.useLayoutEffect(function(){if(o.current!==null&&p===null){var u=c.create(t);if(l(u),u!==null){try{u.setAttribute("reactSdkAnalytics","3.3.16")}catch(f){console.log("Error setting React Sdk version with error message: ",f)}for(;o.current.firstChild;)o.current.removeChild(o.current.firstChild);o.current.appendChild(u)}}},[c,t]),{wrapper:m,component:p}},C=function(t,n,r){I.useEffect(function(){t&&r(t,n)},[t,n,r])},X=function(t){var n=t.onExit,r=t.recipientTermsOfServiceUrl,p=t.fullTermsOfServiceUrl,l=t.privacyPolicyUrl,i=t.skipTermsOfServiceCollection,c=t.collectionOptions,o=t.onLoadError,m=t.onLoaderStart,u=t.onStepChange,f=K("account-onboarding"),S=f.wrapper,h=f.component;return C(h,r,function(s,a){return s.setRecipientTermsOfServiceUrl(a)}),C(h,p,function(s,a){return s.setFullTermsOfServiceUrl(a)}),C(h,l,function(s,a){return s.setPrivacyPolicyUrl(a)}),C(h,i,function(s,a){return s.setSkipTermsOfServiceCollection(a)}),C(h,c,function(s,a){return s.setCollectionOptions(a)}),C(h,n,function(s,a){return s.setOnExit(a)}),C(h,m,function(s,a){s.setOnLoaderStart(a)}),C(h,o,function(s,a){s.setOnLoadError(a)}),C(h,u,function(s,a){return s.setOnStepChange(a)}),S},x;(function(e){e.exit="exit",e.close="close",e.instantPayoutCreated="instantpayoutcreated"})(x||(x={}));function Y(){k();const e=P(),[t,n]=y.useState();var r,p;y.useEffect(()=>{r=localStorage.getItem("authState"),r||e("/"),r=JSON.parse(r),p=r.token,i(p)},[]);async function l(c){try{const o=await fetch("https://backend.wakepackgo.com:8080/payment/initiate_payout_setup",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`}});if(!o.ok){const f=await o.text();alert("Response Body:",f);return}const{body:{clientSecret:m,publishableKey:u}}=await o.json();return{clientSecret:m,publishableKey:u}}catch(o){alert(o)}}async function i(c){try{const{clientSecret:o,publishableKey:m}=await l(c),u=await F({publishableKey:m,fetchClientSecret:()=>Promise.resolve(o),appearance:{overlays:"drawer",variables:{colorPrimary:"#000000",colorText:"#000000"}}});n(u),console.log("stripe connected"),console.log(u)}catch(o){throw console.error("Stripe Connect initialization failed: ",o),o}}return d.jsxs(d.Fragment,{children:[!t&&d.jsx("div",{children:"Loading Please wait..."}),t&&d.jsxs("div",{className:"stripe-payout",style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[d.jsx(B,{connectInstance:t,children:d.jsx(X,{})}),d.jsx("div",{className:"info-callout",children:d.jsxs("p",{children:["This is a sample app for Connect onboarding using the Account Onboarding embedded component.",d.jsx("a",{href:"https://docs.stripe.com/connect/onboarding/quickstart?connect-onboarding-surface=embedded",target:"_blank",rel:"noopener noreferrer",children:"View docs"})]})})]})]})}function ee(){return d.jsxs(d.Fragment,{children:[d.jsx(A,{children:d.jsx("title",{children:" Payout Information | WakePackGo "})}),d.jsx(Y,{})]})}export{ee as default};
